# Generating beyondcoin transactions

## Abstract 
> You should have at minimum a basic understanding of how blockchain and transactions work before proceeding. Transactions are generated by asynchronously executing the newTransaction() function while passing in the required parameters to produce a new transaction.

## `newTransaction()` parameters 

See the table below to get a better understanding of the parameters required. 

## Parameters
| Parameter name | Type | Required | Description | 
| :-------------: |:-------------:| :-------------:| :-------------:|
| `network` | String | Yes | The beyondcoin network specification. 
| `wif` | String | Yes | The WIF associated with the address funding this transaction.
| `utxo` | Array | Yes | An array containing objects with each UTXO used to fund this transaction.  
| `output` | Array | Yes | An array containing objects with the payment addresses and amounts to be transferred for this transaction. 
| `fee` | Number | Yes | The transaction fee, also known as the miner fee.

## Parameters explained 

### `network`
The `network` parameter can be set as either `normal` for live network transactions or as `testnet` for testnet based transactions. 

### `wif`
In this library, the private key to the address funding a transaction is encoded as a WIF, also known as the Wallet Import Format, this is done to make the private key easier to read without compromising on security or integrity. The `wif` must match the corresponding `address`. 

### `utxo`
This is also known as unspent transaction outputs. In this library, the `utxo` is an array containing objects defining each unspent output to be used for this transaction. The objects contain a number of properties, see below. 

#### `utxo` object parameters 
The transaction ID corresponding with the unspent output. 

| Parameter name | Type | Description
| :-------------: |:-------------:| :-------------:| 
| `txid` | String | The unique transaction ID of a UTXO.   
| `index` | String | The index value of this UTXO.  
| `amount` | Number | The amount of beyondcoin present at this UTXO **IN LITOSHI** formatting.

### `output`
In this library, the `output` parameter is an array containing objects defining each potential output with the payment addresses (and other related output data). Multiple new outputs can be created in a single transaction allowing for easy transaction batching, enabling you to consume outputs from previous transactions and send to as many addresses as required. See the parameter properties for `output` objects below. 

####  `output` object parameters 

| Parameter name | Type | Description
| :-------------: |:-------------:| :-------------:| 
| `address` | String | The beyondcoin address.   
| `amount` | String | The amount of **LITOSHI** to pay this address/output.

### `fee`
The transaction fee for this transaction in **LITOSHI**. 

# Considerations

## Transaction amount 
The total sum of all payment amounts set in the `output` object **including the transaction fee** must be equal to or less than the amount specified in the UTXOs provided for a transaction. 

## Change amount 
The change amount is calculated by taking all the `output` amounts and subtracting the transaction fee from the total  `utxo` amounts provided. If the remaining amount is greater than 0, the remaining amount is considered 'change' and will be forwarded to the address corresponding with the WIF funding the transaction, as set in your parameters. 

It's possible to manually create a change amount by setting a custom `output` object with a predetermined change amount using your own calculations. 

# Generating beyondcoin transactions

## 1 to 1 transaction 

An example transaction on the live network sending 299,000 litoshi to one address and a transaction fee of 1000 litoshi using 1 UTXO that has a value of 300,000 litoshi.  
```
const beyondcoinjs = require('beyondcoinjs');

async function newTxExample(){
try {

await beyondcoinjs.newTransaction({
    network: 'normal',
    wif: 'T5ToXxC9NsyngAoDPMRQrmSKaHjrZ8cXKGwHPffvqFxAHJuZVxVm',
    utxo: [{
       txid: 'f6f88dcabf62ceace717eba00eb3993105a06ef3442a7e959e8ec2a3921555d6',
       index: 1,
       amount: 300000 // unspent amount 
    }],
    output: [{
       address: 'MNZnbtzP6CqxUb2EqxRyov1i18NEgpZ5ek',
       amount: 299000 
    }],
    fee: 1000, // transaction fee 
}).then((result) =>{
    console.log(result);
}); 

    } catch (error) {
        console.error(`ERROR: ${error}`);
    }
}

newTxExample()
```

Once executed you will receive a reply with the raw transaction ready to be broadcasted to the beyondcoin network. See the example below. 

```
01000000000101d6551592a3c28e9e957e2a44f36ea0053199b30ea0eb17e7acce62bfca8df8f60100000017160014ba9d1a1991ddef5ec26ec06ffbfe516c4a7bf483ffffffff05c40900000000000017a914a0dfed823efb34a3dec25952b4c36d03584bd5fb87c40900000000000017a9148acb2845dd1759650cd78488f5cb8beabec3922c87c40900000000000017a91440b2ea2ce99914963770e50cb6ed1f46a5c0c7b787c40900000000000017a91441fa3cd57adac4889ca8b8c4ab7cbc4fb220cfbf87464a01000000000017a9148fce3e9d3b80bf290bdaaee926e4a4dfcd0437e98702483045022100b6d1a2f3cf425a61a5eb37de230fc2e78b6981e7cc573f9bebf69797d9aabcba02201165c1687f04201f23ebfd7c79eb08a496b6e0bc5ac60b5043b56c508d3ddd8901210311a741aa69a613d0ecfec0417ca968bcadcbe7710f13102bb8e997fbb3e9586c00000000
```

## 1 to 4 transaction 

An example transaction on the live network sending a total of 299,000 litoshi to 4 different addresses with a transaction fee of 1000 litoshi using 1 UTXO that has a value of 300,000 litoshi.  
```
const beyondcoinjs = require('beyondcoinjs');

async function newTxExample(){
try {

await beyondcoinjs.newTransaction({
    network: 'normal',
    wif: 'T5ToXxC9NsyngAoDPMRQrmSKaHjrZ8cXKGwHPffvqFxAHJuZVxVm',
    utxo: [{
       txid: 'f6f88dcabf62ceace717eba00eb3993105a06ef3442a7e959e8ec2a3921555d6',
       index: 1,
       amount: 300000 // unspent amount 
    }],
    output: [{
       address: 'MNZnbtzP6CqxUb2EqxRyov1i18NEgpZ5ek',
       amount: 74750
    }, 
    {
       address: 'MLZ2rX9Sc2aHiqx3ZaAtAahPo5DnGtEf2H',
       amount: 74750
    },
    {
       address: 'MDoFovRgVciQ8LpLqo5Co8974voA3yqpBn',
       amount: 74750
    },
    {
       address: 'MDv1viQS63YZ39RxKLXTXiKRbQzfJqV3ot',
       amount: 74750
    }],
   
    fee: 1000, // transaction fee 

}).then((result) =>{
    console.log(result);
}); 
    
    } catch (error) {
        console.error(`ERROR: ${error}`);
    }
}

newTxExample(); 
```

## 2 to 4 transaction 

An example transaction on the live network sending a total of 49,000 litoshi from 2 different UTXOs to 4 different addresses with a transaction fee of 1000 litoshi. 
```
const beyondcoinjs = require('beyondcoinjs');

async function newTxExample(){
try {

await beyondcoinjs.newTransaction({
    network: 'normal',
    wif: 'T5ToXxC9NsyngAoDPMRQrmSKaHjrZ8cXKGwHPffvqFxAHJuZVxVm',
    utxo: [{
       txid: 'f6f88dcabf62ceace717eba00eb3993105a06ef3442a7e959e8ec2a3921555d6',
       index: 1,
       amount: 25000 // unspent amount 
    },
    {
       txid: '4a1d36e216a81528d05dcd9e00f688f55eeee815aa74972dc597b9e2c963fd9d',
       index: 0,
       amount: 25000 // unspent amount 
    }],
    output: [{
       address: 'MNZnbtzP6CqxUb2EqxRyov1i18NEgpZ5ek',
       amount: 12250
    }, 
    {
       address: 'MLZ2rX9Sc2aHiqx3ZaAtAahPo5DnGtEf2H',
       amount: 12250
    },
    {
       address: 'MDoFovRgVciQ8LpLqo5Co8974voA3yqpBn',
       amount: 12250
    },
    {
       address: 'MDv1viQS63YZ39RxKLXTXiKRbQzfJqV3ot',
       amount: 12250
    }],
   
    fee: 1000, // transaction fee 

}).then((result) =>{
    console.log(result);
}); 
    
    } catch (error) {
        console.error(`ERROR: ${error}`);
    }
}

newTxExample(); 
```
